ap_imperial_prerogative = {
	modifier = {
		empire_size_colonies_mult = -0.5
		country_official_cap_add = 3
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_imperial_prerogative
		}
		NOT = { has_authority = auth_corporate }
	}

	ai_weight = {
		factor = 15
	}

	on_enabled = {
		run_ai_strategic_data = yes
	}
}

ap_archaeoengineers = {
	potential = {
		NOT = { has_ascension_perk = ap_archaeoengineers }
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_technology_tech_archaeostudies"
			has_technology = tech_archaeostudies
		}
	}

	on_enabled = {
		custom_tooltip = ap_archaeoengineers_tooltip
		hidden_effect = {
			country_event = { id = ancrel.9925 }
		}
		every_system = {
			limit = {
				is_owned_by = root
				has_modifier = zroni_storm
				starbase = {
					count_starbase_buildings = {
						type = zroni_storm_caster
						include_being_constructed = no
						count = 1
					}
				}
				any_ship_in_system = {
					is_ship_class = shipclass_starbase
					NOT = { has_component = "STARBASE_AURA_ZRONI_STORM" }
				}
			}
			system_event = {
				id = ancrel.9901
			}
		}
	}

	modifier = {
		country_scientist_cap_add = 1
		weapon_archaeotech_weapon_damage_mult = 0.25
		weapon_archaeotech_weapon_fire_rate_mult = 0.25
		weapon_archaeotech_speed_mult = 0.25
		starbase_shipyard_build_minor_artifacts_cost_mult = -0.75
	}

	ai_weight = {
		factor = 0
	}
}
ap_world_shaper = {
	possible = {
		custom_tooltip = {
			fail_text = "requires_technology_tech_climate_restoration"
			has_technology = tech_climate_restoration
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
	}

	modifier = {
		terraforming_cost_mult = -0.5
		terraform_speed_mult = 1
	}

	on_enabled = {
		custom_tooltip = "allow_gaia"
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_world_shaper
		}
		NOT = { has_authority = auth_hive_mind }
		OR = {
			NOT = { has_authority = auth_machine_intelligence }
			has_valid_civic = civic_machine_servitor
			has_valid_civic = civic_machine_assimilator
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 0
			OR = {
				has_origin = origin_void_dwellers
				has_origin = origin_shattered_ring
				has_trait = trait_aquatic
				has_ethic = ethic_gestalt_consciousness
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_ethic = ethic_pacifist
				has_ethic = ethic_xenophobe
			}
		}
		modifier = {
			factor = 3
			OR = {
				has_ethic = ethic_fanatic_pacifist
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		modifier = { #only way to get more nice planets
			factor = 100
			has_origin = origin_life_seeded
		}
	}
}
ap_grasp_the_void = {
	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
	}

	on_enabled = {
		custom_tooltip = "ap_grasp_the_void_tech_effect"
	}

	modifier = {
		country_starbase_capacity_add = 5
		country_starbase_capacity_mult = 0.5
		starbase_shipyard_build_speed_mult = 1
		starbase_upgrade_cost_mult = -0.25
		starbase_upgrade_speed_mult = 2
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_grasp_the_void
		}
	}

	ai_weight = {
		factor = 3
		modifier = {
			factor = 2
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 1.5
			is_xenophobe = yes
		}
	}
}
ap_eternal_vigilance = {
	possible = {
		custom_tooltip = {
			fail_text = "requires_technology_starbase_4"
			has_technology = tech_starbase_4
		}
	}

	modifier = {
		country_commander_cap_add = 2
		shipclass_starbase_damage_mult = 1
		shipclass_starbase_hull_mult = 1
		shipclass_military_station_damage_mult = 0.33
		starbase_defense_platform_capacity_add = 5
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_eternal_vigilance
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_civic = civic_inwards_perfection
		}
		modifier = {
			factor = 1.5
			is_xenophobe = yes
		}
		modifier = {
			factor = 1.5
			any_neighbor_country = {
				is_country_type = default
				opinion_level = { who = root level <= poor }
				relative_power = { who = root value >= superior }
			}
		}
	}
}
ap_executive_vigor = {
	modifier = {
		country_edict_fund_add = 250
		edicts_upkeep_mult = -0.15
		council_agenda_progress_speed = 0.75
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_executive_vigor
		}
	}

	ai_weight = {
		factor = 30 #it's better than average
	}
}
ap_one_vision = {
	modifier = {
		country_unity_produces_mult = 0.2
		pop_amenities_usage_mult = -0.25
		pop_government_ethic_attraction = 1
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_one_vision
			has_authority = "auth_machine_intelligence"
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_authoritarian
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_authoritarian
		}
		modifier = {
			factor = 2
			has_ethic = ethic_spiritualist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_spiritualist
		}
	}
}
ap_shared_destiny = {
	on_enabled = {
		hidden_effect = {
			country_event = { id = action.446 }
		}
	}

	modifier = {
		divided_patrongage_max_subjects = 1
		envoys_add = 2
		diplo_weight_mult = 0.2
		diplomacy_influence_upkeep_mult = -0.25
		diplo_action_acceptance_add = 100
	}

	potential = {
		NOR = {
			has_valid_civic = civic_fanatic_purifiers
			has_valid_civic = civic_hive_devouring_swarm
			has_valid_civic = civic_inwards_perfection
			has_valid_civic = civic_machine_terminator
		}
		NOT = {
			has_ascension_perk = ap_shared_destiny
		}
	}

	ai_weight = {
		factor = 5
		modifier = {
			factor = 0
			subjects < 2
			count_envoy = {
				count < 3
			}
		}
	}
}
ap_interstellar_dominion = {
	modifier = {
		country_ethic_influence_produces_add = 4
		country_starbase_influence_cost_mult = -0.33
		country_claim_influence_cost_mult = -0.33
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_interstellar_dominion
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_xenophobe
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_xenophobe
		}
		modifier = {
			factor = 0
			is_pacifist = yes
			years_passed > 40
		}
		modifier = {
			factor = 0
			OR = { #useless, total war CBs
				is_homicidal = yes
				has_valid_civic = civic_machine_assimilator
				has_ascension_perk = ap_become_the_crisis
				has_ascension_perk = ap_colossus
			}
		}
	}
}
ap_galactic_force_projection = {
	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
	}
	modifier = {
		country_power_projection_influence_produces_add = 4
		country_commander_cap_add = 1
		country_naval_cap_add = 100
		command_limit_add = 100
	}

	potential = {
		NOT = {
			has_ascension_perk = ap_galactic_force_projection
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.5
			num_owned_planets < 10
		}
		modifier = {
			factor = 1.5
			num_owned_planets < 20
		}
		modifier = {
			factor = 2
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 2
			has_ascension_perk = ap_become_the_crisis
		}
		modifier = {
			factor = 5
			used_naval_capacity_percent > 1.3
		}
		modifier = {
			factor = 4
			used_naval_capacity_percent > 0.9
		}
		modifier = {
			factor = 0.01
			used_naval_capacity_percent < 0.5
		}
		modifier = {
			factor = 0.01
			has_monthly_income = {
				resource = alloys
				value < 0
			}
		}
	}
}
ap_enigmatic_engineering = {
	potential = {
		host_has_dlc = "Apocalypse"
		NOT = {
			has_ascension_perk = ap_enigmatic_engineering
		}
	}

	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_1"
			num_ascension_perks > 0
		}
	}

	on_enabled = {
		custom_tooltip = "no_rev_engineering"
	}

	modifier = {
		intel_encryption_add = 2
	}

	tradition_swap = {
		name = ap_enigmatic_engineering_cloaking
		inherit_effects = no
		inherit_icon = yes
		trigger = {
			has_first_contact_dlc = yes
		}

		on_enabled = {
			custom_tooltip = "no_rev_engineering"
		}

		modifier = {
			ship_cloaking_strength_add = 2
			intel_encryption_add = 2
		}

		weight = {
			factor = 1
		}
	}

	ai_weight = {
		factor = 0
	}
}
ap_lord_of_war = {
	potential = {
		host_has_dlc = "Overlord"
		NOT = { has_ascension_perk = ap_lord_of_war }
		NOR = {
			has_ethic = ethic_gestalt_consciousness
			has_valid_civic = civic_fanatic_purifiers
		}
	}

	on_enabled ={
		custom_tooltip = ap_lord_of_war_tooltip
	}

	modifier = {
		country_enclave_capacity_add = 1
		diplo_weight_naval_mult = 0.25
		#Bonus to dividends frequency handled in the dividends situation.
	}

	ai_weight = {
		factor = 0
	}
}